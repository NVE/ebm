# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python


trigger:
  branches:
    include:
      - dev

jobs:
- job: PushToGitHub
  displayName: 'Push Azure DevOps repo to GitHub'
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    - name: pythonversion
      value: '3.11'
    - name: email
      value: 'ebm@nve.no'
  steps:
    - task: UsePythonVersion@0
      inputs:
        versionSpec: '$(pythonversion)'
      displayName: 'Use Python $(pythonversion) üêç'
    - checkout: self
      persistCredentials: true
      fetchTags: true
      fetchDepth: 0
      displayName:  'Checkout ebm ‚ö°'

    - template: template-pytest-tasks.yml

    - template: template-push-to-github.yml
      parameters:
        remote_branch: '$(Build.SourceBranchName)'
        GIT_USER_EMAIL: 'kenord@nve.no'
