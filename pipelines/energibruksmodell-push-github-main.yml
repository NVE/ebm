
trigger:
  branches:
    include:
      - main

jobs:
- job: EnergibruksmodellPushGithubMain
  displayName: 'Push Azure DevOps repo to GitHub'
  pool:
    vmImage: 'ubuntu-latest'
  variables:
    - name: pythonversion
      value: '3.11'
    - name: email
      value: 'ebm@nve.no'
  steps:
    - task: UsePythonVersion@0
      inputs:
        versionSpec: '$(pythonversion)'
      displayName: 'Use Python $(pythonversion) üêç'

    - checkout: self
      fetchTags: true
      fetchDepth: 0
      displayName: 'Checkout ebm ‚ö°'
      # Set fetchDepth to 0 to ensure the full Git history is available.
      # Required for operations that rely on commit history, such as changelogs, versioning, or pushing to remote.

    - template: template-pytest-tasks.yml

    - template: template-push-to-github.yml
      parameters:
        remote_repo: '$(GITHUB_REPO)'
        remote_branch: '$(Build.SourceBranchName)'
        GIT_USER_EMAIL: '$(GITHUB_USER_EMAIL)'
